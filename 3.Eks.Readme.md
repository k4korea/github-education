
#### 

#### 1.VPC 생성 10.0.0.0/16
  subnet 수정  자동IP 생성 
  
#### 2. eksctl dowload , 설치
  eksctl 설치 
      ARCH=amd64
      PLATFORM=$(uname -s)_$ARCH
      curl -sLO "https://github.com/eksctl-io/eksctl/releases/latest/download/eksctl_$PLATFORM.tar.gz"

      (Optional) Verify checksum
      curl -sL "https://github.com/eksctl-io/eksctl/releases/latest/download/eksctl_checksums.txt" | grep $PLATFORM | sha256sum --check
      tar -xzf eksctl_$PLATFORM.tar.gz -C /tmp && rm eksctl_$PLATFORM.tar.gz
      sudo mv /tmp/eksctl /usr/local/bin  

   
#### 3. AWS cloud9 추가셋팅 하기 
    disksize 증설
    df -h
    sudo resize2fs /dev/nvme0n1p1
    df -h ( 30G )

#### 4. eksctl 클러스터 생성하기 
   eks-demo-cluster 
    => aws region 수정
    => eks version 1.28

   aws eks list-clusters
   aws eks update-kubeconfig --name < cluster name >

#### 5. eks fargate  생성 
   cloud9 터미널 추가후 
   eks fargate 생성합니다. 
   ~~~~~~ 10 분간 휴식 ~~~~~~~~~~

사용자 추가시
iam 창에 eksworkspace-admin
arn:aws:iam::<계정ID>:role/eksworkspace-admin  복사
eksctl create iamidentitymapping --cluster eks-demo --arn arn:aws:iam::557269744548:role/eksworkspace-admin --group system:masters --username admin

k get configmap -n kube-system aws-auth -o yaml

#### 6. aws load-balancer v1 -> v2
https://kubernetes-sigs.github.io/aws-load-balancer-controller/v2.4/deploy/installation/

error auto-discover subnets: UnauthorizedOperation: You are not authorized to perform this 

                "elasticloadbalancing:ModifyTargetGroup",
                "elasticloadbalancing:ModifyTargetGroupAttributes",
                "elasticloadbalancing:RegisterTargets",
                "elasticloadbalancing:DeregisterTargets",
                "elasticloadbalancing:CreateTargetGroup",
                "elasticloadbalancing:AddTags",
   
   
    
